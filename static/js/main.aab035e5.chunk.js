(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{124:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(10),i=n.n(r);n(94),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(95);var s,o,u,d=n(171),l=n(169),O=n(176),j=n(166),b=n(172),f=n(174),p=n(175),T=n(173),h=n(18),v=n(15),S=n.n(v),m=n(25),x=n(53),k=n(8),y=n(74),g=n.n(y).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"api-key":"56cc9d09-6ac5-48a7-98d1-6f7ea21ef704"}}),C=function(){return g.get("/todo-lists")},L=function(t){return g.post("/todo-lists",{title:t})},I=function(t){return g.delete("/todo-lists/".concat(t))},E=function(t,e){return g.put("/todo-lists/".concat(t),{title:e})},A=function(t){return g.get("/todo-lists/".concat(t,"/tasks"))},D=function(t,e){return g.post("/todo-lists/".concat(t,"/tasks"),{title:e})},w=function(t,e){return g.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},N=function(t,e,n){return g.put("/todo-lists/".concat(t,"/tasks/").concat(e),n)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(s||(s={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(o||(o={})),function(t){t[t.succeeded=0]="succeeded",t[t.error=1]="error",t[t.captcha=10]="captcha"}(u||(u={}));var K={status:"idle",error:null},R=function(t){return{type:"APP/SET-STATUS",status:t}},H=function(t){return{type:"APP/SET-ERROR",error:t}},P=function(t,e){t(H(e)),t(R("failed"))},G=function(t,e){e.messages.length?t(H(e.messages[0])):t(H("Some ERROR")),t(R("failed"))},U=[],M=function(t){return{type:"TODO/REMOVE-TODOLIST",id:t}},W=function(t,e){return{type:"TODO/CHANGE-TODOLIST-TITLE",title:t,id:e}},F=function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",entityStatus:t,id:e}},V=n(170),z=n(125),B=n(41),Y=n(177),J=n(167),q=n(5),$=c.a.memo((function(t){var e=t.addItem,n=t.disabled,c=Object(a.useState)(""),r=Object(B.a)(c,2),i=r[0],s=r[1],o=Object(a.useState)(!1),u=Object(B.a)(o,2),d=u[0],l=u[1],O=Object(a.useCallback)((function(t){s(t.currentTarget.value),l(!1)}),[]),b=Object(a.useCallback)((function(){""!==i.trim()?e(i.trim()):l(!0),s("")}),[e,i]),f=Object(a.useCallback)((function(t){"Enter"===t.key&&b()}),[b]);return Object(q.jsxs)("div",{children:[Object(q.jsx)(Y.a,{variant:"outlined",error:d,placeholder:"Enter a new task",value:i,onChange:O,onKeyPress:f,label:"Title",helperText:d&&"Title is required!",size:"small",onBlur:function(){return l(!1)},disabled:n}),Object(q.jsx)(j.a,{onClick:b,disabled:n,children:Object(q.jsx)(J.a,{})})]})})),Q=n(162),X=c.a.memo((function(t){var e=t.title,n=t.disabled,c=t.onChangeTitle,r=Object(a.useState)(!1),i=Object(B.a)(r,2),s=i[0],o=i[1],u=Object(a.useState)(e),d=Object(B.a)(u,2),l=d[0],O=d[1],j=Object(a.useCallback)((function(){o(!1),l.length>100&&O(e),c(l)}),[c,l,e]),b=Object(a.useCallback)((function(t){O(t.currentTarget.value)}),[]),f=Object(a.useCallback)((function(t){"Enter"===t.key&&j()}),[j]);return s?Object(q.jsx)(Q.a,{color:"primary",value:l,onChange:b,autoFocus:!0,onBlur:j,onKeyPress:f,disabled:n}):Object(q.jsx)("span",{onDoubleClick:function(){return o(!0)},children:e})})),Z=n(79),_=n.n(Z),tt=n(26),et={},nt=function(t,e){return{type:"TASKS/SET-TASKS",todoListId:t,tasks:e}},at=function(t,e){return{type:"TASKS/REMOVE-TASK",taskId:t,todoListId:e}},ct=function(t,e,n){return{type:"TASKS/CHANGE-TASK",taskId:t,model:e,todoListId:n}},rt=function(t,e,n){return{type:"CHANGE-TASK-ENTITY-STATUS",entityStatus:t,todoListId:e,taskId:n}},it=function(t,e,n){return function(){var a=Object(m.a)(S.a.mark((function a(c,r){var i,s,o;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(i=r().tasks[t].find((function(t){return t.id===n})))){a.next=14;break}return s=Object(k.a)({title:i.title,status:i.status,startDate:i.startDate,priority:i.priority,deadline:i.deadline,description:i.description},e),c(R("loading")),a.prev=4,a.next=7,N(t,n,s);case 7:(o=a.sent).data.resultCode===u.succeeded?(c(ct(n,e,t)),c(R("succeeded"))):G(c,o.data),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(4),P(c,a.t0.message);case 14:case"end":return a.stop()}}),a,null,[[4,11]])})));return function(t,e){return a.apply(this,arguments)}}()},st=n(179),ot=n(168),ut=c.a.memo((function(t){var e=t.todoListId,n=t.task,c=t.entityStatus,r=Object(h.b)(),i=Object(a.useCallback)((function(){return r((t=e,a=n.id,function(){var e=Object(m.a)(S.a.mark((function e(n){var c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(R("loading")),n(rt("loading",t,a)),e.prev=2,e.next=5,w(t,a);case 5:(c=e.sent).data.resultCode===u.succeeded?(n(at(a,t)),n(R("succeeded"))):G(n,c.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),P(n,e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()));var t,a}),[r,n,e]),o=Object(a.useCallback)((function(t){r(it(e,{status:t.currentTarget.checked?s.Completed:s.New},n.id))}),[r,n,e]),d=Object(a.useCallback)((function(t){return r(it(e,{title:t},n.id))}),[r,n,e]),l=n.status===s.Completed?"isDone":"";return Object(q.jsxs)("li",{children:[Object(q.jsxs)("span",{className:l,children:[Object(q.jsx)(st.a,{color:"primary",checked:n.status===s.Completed,onChange:o,disabled:"loading"===c}),Object(q.jsx)(X,{title:n.title,onChangeTitle:d,disabled:"loading"===c})]}),Object(q.jsx)(j.a,{onClick:i,disabled:"loading"===c,children:Object(q.jsx)(ot.a,{})})]},n.id)})),dt=c.a.memo((function(t){var e=t.todoListId,n=t.changeTodoListTitle,c=t.removeTodolist,r=t.changeFilter,i=t.title,o=t.filter,d=t.entityStatus,O=Object(h.c)((function(t){return t.tasks[e]})),b=Object(h.b)();Object(a.useEffect)((function(){b(function(t){return function(){var e=Object(m.a)(S.a.mark((function e(n){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(R("loading")),e.next=3,A(t);case 3:a=e.sent,n(nt(t,a.data.items)),n(R("succeeded"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e))}),[b,e]);var f=function(){switch(o){case"active":return O.filter((function(t){return t.status===s.New}));case"completed":return O.filter((function(t){return t.status===s.Completed}));default:return O}}(),p=Object(a.useCallback)((function(){r("all",e)}),[r,e]),T=Object(a.useCallback)((function(){r("active",e)}),[r,e]),v=Object(a.useCallback)((function(){r("completed",e)}),[r,e]),x=Object(a.useCallback)((function(){c(e)}),[c,e]),k=Object(a.useCallback)((function(t){return b(function(t,e){return function(){var n=Object(m.a)(S.a.mark((function n(a){var c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(R("loading")),n.prev=1,n.next=4,D(t,e);case 4:(c=n.sent).data.resultCode===u.succeeded?(a({type:"TASKS/ADD-NEW-TASK",task:c.data.data.item}),a(R("succeeded"))):G(a,c.data),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),P(a,n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(t){return n.apply(this,arguments)}}()}(e,t))}),[b,e]),y=Object(a.useCallback)((function(t){return n(t,e)}),[n,e]);return Object(q.jsxs)("div",{children:[Object(q.jsxs)("h3",{children:[Object(q.jsx)(X,{title:i,onChangeTitle:y,disabled:"loading"===d}),Object(q.jsx)(j.a,{onClick:x,disabled:"loading"===d,children:Object(q.jsx)(_.a,{})})]}),Object(q.jsx)($,{addItem:k,disabled:"loading"===d}),Object(q.jsx)("ul",{style:{listStyle:"none",paddingLeft:"0px"},children:f.map((function(t){return Object(q.jsx)(ut,{todoListId:e,task:t,entityStatus:t.entityStatus},t.id)}))}),Object(q.jsxs)("div",{children:[Object(q.jsx)(l.a,{variant:"all"===o?"contained":"outlined",size:"small",color:"primary",onClick:p,children:"All"}),Object(q.jsx)(l.a,{style:{marginLeft:"3px"},variant:"active"===o?"contained":"outlined",size:"small",color:"primary",onClick:T,children:"Active"}),Object(q.jsx)(l.a,{style:{marginLeft:"3px"},variant:"completed"===o?"contained":"outlined",size:"small",color:"primary",onClick:v,children:"Completed"})]})]})})),lt=function(){var t=Object(h.c)((function(t){return t.todoLists})),e=Object(h.b)();function n(t){var n;e((n=t,function(){var t=Object(m.a)(S.a.mark((function t(e){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(R("loading")),e(F("loading",n)),t.prev=2,t.next=5,I(n);case 5:(a=t.sent).data.resultCode===u.succeeded?(e(M(n)),e(R("succeeded"))):G(e,a.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),P(e,t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()))}Object(a.useEffect)((function(){e(function(){var t=Object(m.a)(S.a.mark((function t(e){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(R("loading")),t.next=3,C();case 3:n=t.sent,e({type:"TODO/SET-TODOLISTS",todoLists:n.data}),e(R("succeeded"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e]);var c=Object(a.useCallback)((function(t){e(function(t){return function(){var e=Object(m.a)(S.a.mark((function e(n){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(R("loading")),e.prev=1,e.next=4,L(t);case 4:(a=e.sent).data.resultCode===u.succeeded?(n({type:"TODO/ADD-NEW-TODOLIST",todoList:a.data.data.item}),n(R("succeeded"))):G(n,a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),P(n,e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}(t))}),[e]);function r(t,n){e(function(t,e){return function(){var n=Object(m.a)(S.a.mark((function n(a){var c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(R("loading")),n.prev=1,n.next=4,E(t,e);case 4:(c=n.sent).data.resultCode===u.succeeded?(a(W(e,t)),a(R("succeeded"))):G(a,c.data),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),P(a,n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(t){return n.apply(this,arguments)}}()}(n,t))}function i(t,n){e(function(t,e){return{type:"TODO/CHANGE-TODOLIST-FILTER",value:t,id:e}}(t,n))}return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(V.a,{container:!0,style:{padding:"20px 0"},children:Object(q.jsx)($,{addItem:c})}),Object(q.jsx)(V.a,{container:!0,spacing:3,children:t.map((function(t){return Object(q.jsx)(V.a,{item:!0,children:Object(q.jsx)(z.a,{elevation:4,style:{padding:"15px"},children:Object(q.jsx)(dt,{todoListId:t.id,title:t.title,filter:t.filter,entityStatus:t.entityStatus,changeFilter:i,removeTodolist:n,changeTodoListTitle:r})})},t.id)}))})]})},Ot=n(181),jt=n(178);function bt(t){return Object(q.jsx)(jt.a,Object(k.a)({elevation:6,variant:"filled"},t))}function ft(){var t=Object(h.b)(),e=Object(h.c)((function(t){return t.app.error})),n=function(e,n){"clickaway"!==n&&t(H(null))};return Object(q.jsx)(Ot.a,{open:null!==e,autoHideDuration:4e3,onClose:n,children:Object(q.jsx)(bt,{onClose:n,severity:"error",children:e})})}var pt=function(){var t=Object(h.c)((function(t){return t.app.status}));return Object(q.jsxs)("div",{children:[Object(q.jsx)(d.a,{position:"static",children:Object(q.jsxs)(b.a,{style:{justifyContent:"space-between"},children:[Object(q.jsx)(j.a,{color:"inherit",children:Object(q.jsx)(T.a,{})}),Object(q.jsx)(f.a,{variant:"h6",children:"TodoLists"}),Object(q.jsx)(l.a,{color:"inherit",variant:"outlined",children:"LogIn"})]})}),"loading"===t&&Object(q.jsx)(p.a,{color:"secondary"}),Object(q.jsx)(O.a,{fixed:!0,children:Object(q.jsx)(lt,{})}),Object(q.jsx)(ft,{})]})},Tt=n(54),ht=n(80),vt=Object(Tt.b)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TODO/SET-TODOLISTS":return e.todoLists.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"TODO/REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"TODO/ADD-NEW-TODOLIST":return[Object(k.a)(Object(k.a)({},e.todoList),{},{filter:"all",entityStatus:"idle"})].concat(Object(x.a)(t));case"TODO/CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.id?Object(k.a)(Object(k.a)({},t),{},{title:e.title}):t}));case"TODO/CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.id?Object(k.a)(Object(k.a)({},t),{},{filter:e.value}):t}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(k.a)(Object(k.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TASKS/SET-TASKS":return Object(k.a)(Object(k.a)({},t),{},Object(tt.a)({},e.todoListId,e.tasks.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{entityStatus:"idle"})}))));case"TODO/SET-TODOLISTS":return e.todoLists.forEach((function(e){return Object(k.a)({},t[e.id]=[])})),Object(k.a)({},t);case"TASKS/REMOVE-TASK":return Object(k.a)(Object(k.a)({},t),{},Object(tt.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.taskId}))));case"TASKS/ADD-NEW-TASK":return Object(k.a)(Object(k.a)({},t),{},Object(tt.a)({},e.task.todoListId,[Object(k.a)(Object(k.a)({},e.task),{},{entityStatus:"idle"})].concat(Object(x.a)(t[e.task.todoListId]))));case"TASKS/CHANGE-TASK":return Object(k.a)(Object(k.a)({},t),{},Object(tt.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskId?Object(k.a)(Object(k.a)({},t),e.model):t}))));case"TODO/ADD-NEW-TODOLIST":return Object(k.a)(Object(k.a)({},t),{},Object(tt.a)({},e.todoList.id,[]));case"TODO/REMOVE-TODOLIST":var n=Object(k.a)({},t);return delete n[e.id],n;case"CHANGE-TASK-ENTITY-STATUS":return Object(k.a)(Object(k.a)({},t),{},Object(tt.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskId?Object(k.a)(Object(k.a)({},t),{},{entityStatus:e.entityStatus}):t}))));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(k.a)(Object(k.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(k.a)(Object(k.a)({},t),{},{error:e.error});default:return t}}}),St=Object(Tt.c)(vt,Object(Tt.a)(ht.a));window.store=St,i.a.render(Object(q.jsx)(h.a,{store:St,children:Object(q.jsx)(pt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},94:function(t,e,n){},95:function(t,e,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.aab035e5.chunk.js.map