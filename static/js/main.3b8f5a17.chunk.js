(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{104:function(t,e,n){"use strict";n.r(e);var c=n(0),i=n.n(c),a=n(10),o=n.n(a);n(79),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(80);var r,s,u=n(31),l=n(147),d=n(137),O=n(138),j=n(5),b=i.a.memo((function(t){var e=t.addItem,n=Object(c.useState)(""),i=Object(u.a)(n,2),a=i[0],o=i[1],r=Object(c.useState)(!1),s=Object(u.a)(r,2),b=s[0],f=s[1],T=Object(c.useCallback)((function(t){o(t.currentTarget.value),f(!1)}),[]),h=Object(c.useCallback)((function(){""!==a.trim()?e(a.trim()):f(!0),o("")}),[e,a]),L=Object(c.useCallback)((function(t){"Enter"===t.key&&h()}),[h]);return Object(j.jsxs)("div",{children:[Object(j.jsx)(l.a,{variant:"outlined",error:b,placeholder:"Enter a new task",value:a,onChange:T,onKeyPress:L,label:"Title",helperText:b&&"Title is required!",size:"small",onBlur:function(){return f(!1)}}),Object(j.jsx)(d.a,{onClick:h,children:Object(j.jsx)(O.a,{})})]})})),f=n(133),T=i.a.memo((function(t){var e=t.title,n=t.onChangeTitle,i=Object(c.useState)(!1),a=Object(u.a)(i,2),o=a[0],r=a[1],s=Object(c.useState)(e),l=Object(u.a)(s,2),d=l[0],O=l[1],b=Object(c.useCallback)((function(){r(!1),n(d)}),[n,d]),T=Object(c.useCallback)((function(t){O(t.currentTarget.value)}),[]),h=Object(c.useCallback)((function(t){"Enter"===t.key&&b()}),[b]);return o?Object(j.jsx)(f.a,{color:"primary",value:d,onChange:T,autoFocus:!0,onBlur:b,onKeyPress:h}):Object(j.jsx)("span",{onDoubleClick:function(){return r(!0)},children:e})})),h=n(140),L=n(139),p=n(19),E=n(43),S=n(24),I=n(9),m=n(65),v=n.n(m).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"api-key":"56cc9d09-6ac5-48a7-98d1-6f7ea21ef704"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(r||(r={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var k,C=function(){return v.get("/todo-lists")},x=function(t){return v.post("/todo-lists",{title:t})},D=function(t){return v.delete("/todo-lists/".concat(t))},_=function(t,e){return v.put("/todo-lists/".concat(t),{title:e})},A=function(t){return v.get("/todo-lists/".concat(t,"/tasks"))},g=function(t,e){return v.post("/todo-lists/".concat(t,"/tasks"),{title:e})},y=function(t,e){return v.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},N=function(t,e,n){return v.put("/todo-lists/".concat(t,"/tasks/").concat(e),n)};!function(t){t.SET_TODOLISTS="SET-TODOLISTS",t.REMOVE_TODOLIST="REMOVE-TODOLIST",t.ADD_NEW_TODOLIST="ADD-NEW-TODOLIST",t.CHANGE_TODOLIST_TITLE="CHANGE-TODOLIST-TITLE",t.CHANGE_TODOLIST_FILTER="CHANGE-TODOLIST-FILTER"}(k||(k={}));var w,K=[],H=function(){return function(t){C().then((function(e){var n;t((n=e.data,{type:k.SET_TODOLISTS,todoLists:n}))}))}},R=function(t){return function(e){D(t).then((function(){var n;e((n=t,{type:k.REMOVE_TODOLIST,todoListId:n}))}))}},G=function(t){return function(e){x(t).then((function(t){var n;e((n=t.data.data.item,{type:k.ADD_NEW_TODOLIST,todoList:n}))}))}},M=function(t,e){return function(n){_(t,e).then((function(){n(function(t,e){return{type:k.CHANGE_TODOLIST_TITLE,title:t,todoListId:e}}(e,t))}))}};!function(t){t.SET_TASKS="SET-TASKS",t.REMOVE_TASK="REMOVE-TASK",t.ADD_NEW_TASK="ADD-NEW-TASK",t.CHANGE_TASK="CHANGE-TASK"}(w||(w={}));var W={},V=function(t){return function(e){A(t).then((function(n){e(function(t,e){return{type:w.SET_TASKS,todoListId:t,tasks:e}}(t,n.data.items))}))}},F=function(t,e){return function(n){y(t,e).then((function(){var c,i;n((c=e,i=t,{type:w.REMOVE_TASK,id:c,todoListId:i}))}))}},z=function(t,e){return function(n){g(t,e).then((function(t){var e;n((e=t.data.data.item,{type:w.ADD_NEW_TASK,task:e}))}))}},B=function(t,e,n){return function(c,i){var a=i().tasks[t].find((function(t){return t.id===n}));if(a){var o=Object(I.a)({title:a.title,status:a.status,startDate:a.startDate,priority:a.priority,deadline:a.deadline,description:a.description},e);N(t,n,o).then((function(){c(function(t,e,n){return{type:w.CHANGE_TASK,taskId:t,model:e,todoListId:n}}(n,e,t))}))}}},P=n(148),U=i.a.memo((function(t){var e=t.todoListId,n=t.task,i=Object(p.b)(),a=Object(c.useCallback)((function(){return i(F(e,n.id))}),[i,n,e]),o=Object(c.useCallback)((function(t){i(B(e,{status:t.currentTarget.checked?r.Completed:r.New},n.id))}),[i,n,e]),s=Object(c.useCallback)((function(t){return i(B(e,{title:t},n.id))}),[i,n,e]),u=n.status===r.Completed?"isDone":"";return Object(j.jsxs)("li",{children:[Object(j.jsxs)("span",{className:u,children:[Object(j.jsx)(P.a,{color:"primary",checked:n.status===r.Completed,onChange:o}),Object(j.jsx)(T,{title:n.title,onChangeTitle:s})]}),Object(j.jsx)(d.a,{onClick:a,children:Object(j.jsx)(L.a,{})})]},n.id)})),J=i.a.memo((function(t){var e=t.todoListId,n=t.changeTodoListTitle,i=t.removeTodolist,a=t.changeFilter,o=t.title,s=t.filter,u=Object(p.c)((function(t){return t.tasks[e]})),l=Object(p.b)();Object(c.useEffect)((function(){l(V(e))}),[]);var O=function(){switch(s){case"active":return u.filter((function(t){return t.status===r.New}));case"completed":return u.filter((function(t){return t.status===r.Completed}));default:return u}}(),f=Object(c.useCallback)((function(){a("all",e)}),[a,e]),E=Object(c.useCallback)((function(){a("active",e)}),[a,e]),S=Object(c.useCallback)((function(){a("completed",e)}),[a,e]),I=Object(c.useCallback)((function(){i(e)}),[i,e]),m=Object(c.useCallback)((function(t){return l(z(e,t))}),[l,e]),v=Object(c.useCallback)((function(t){return n(t,e)}),[n,e]);return Object(j.jsxs)("div",{children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(T,{title:o,onChangeTitle:v}),Object(j.jsx)(d.a,{onClick:I,children:Object(j.jsx)(L.a,{})})]}),Object(j.jsx)(b,{addItem:m}),Object(j.jsx)("ul",{style:{listStyle:"none",paddingLeft:"0px"},children:O.map((function(t){return Object(j.jsx)(U,{todoListId:e,task:t},t.id)}))}),Object(j.jsxs)("div",{children:[Object(j.jsx)(h.a,{variant:"all"===s?"contained":"outlined",size:"small",color:"primary",onClick:f,children:"All"}),Object(j.jsx)(h.a,{style:{marginLeft:"3px"},variant:"active"===s?"contained":"outlined",size:"small",color:"primary",onClick:E,children:"Active"}),Object(j.jsx)(h.a,{style:{marginLeft:"3px"},variant:"completed"===s?"contained":"outlined",size:"small",color:"primary",onClick:S,children:"Completed"})]})]})})),q=n(141),$=n(105),Q=n(142),X=n(143),Y=n(145),Z=n(146),tt=n(144);var et=function(){var t=Object(p.c)((function(t){return t.todoLists})),e=Object(p.b)();function n(t){e(R(t))}Object(c.useEffect)((function(){e(H())}),[]);var i=Object(c.useCallback)((function(t){e(G(t))}),[e]);function a(t,n){e(M(n,t))}function o(t,n){e(function(t,e){return{type:k.CHANGE_TODOLIST_FILTER,value:t,todoListId:e}}(t,n))}var r=t.map((function(t){return Object(j.jsx)(q.a,{item:!0,children:Object(j.jsx)($.a,{elevation:4,style:{padding:"15px"},children:Object(j.jsx)(J,{todoListId:t.id,title:t.title,changeFilter:o,filter:t.filter,removeTodolist:n,changeTodoListTitle:a})})},t.id)}));return Object(j.jsxs)("div",{children:[Object(j.jsx)(Q.a,{position:"static",children:Object(j.jsxs)(X.a,{style:{justifyContent:"space-between"},children:[Object(j.jsx)(d.a,{color:"inherit",children:Object(j.jsx)(tt.a,{})}),Object(j.jsx)(Y.a,{variant:"h6",children:"TodoLists"}),Object(j.jsx)(h.a,{color:"inherit",variant:"outlined",children:"LogIn"})]})}),Object(j.jsxs)(Z.a,{fixed:!0,children:[Object(j.jsx)(q.a,{container:!0,style:{padding:"20px 0"},children:Object(j.jsx)(b,{addItem:i})}),Object(j.jsx)(q.a,{container:!0,spacing:3,children:r})]})]})},nt=n(44),ct=n(66),it=Object(nt.b)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k.SET_TODOLISTS:return e.todoLists.map((function(t){return Object(I.a)(Object(I.a)({},t),{},{filter:"all"})}));case k.REMOVE_TODOLIST:return t.filter((function(t){return t.id!==e.todoListId}));case k.ADD_NEW_TODOLIST:var n=Object(I.a)(Object(I.a)({},e.todoList),{},{filter:"all"});return[n].concat(Object(E.a)(t));case k.CHANGE_TODOLIST_TITLE:return t.map((function(t){return t.id===e.todoListId?Object(I.a)(Object(I.a)({},t),{},{title:e.title}):t}));case k.CHANGE_TODOLIST_FILTER:return t.map((function(t){return t.id===e.todoListId?Object(I.a)(Object(I.a)({},t),{},{filter:e.value}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case w.SET_TASKS:return Object(I.a)(Object(I.a)({},t),{},Object(S.a)({},e.todoListId,e.tasks));case k.SET_TODOLISTS:return e.todoLists.forEach((function(e){return Object(I.a)({},t[e.id]=[])})),Object(I.a)({},t);case w.REMOVE_TASK:return Object(I.a)(Object(I.a)({},t),{},Object(S.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.id}))));case w.ADD_NEW_TASK:return Object(I.a)(Object(I.a)({},t),{},Object(S.a)({},e.task.todoListId,[e.task].concat(Object(E.a)(t[e.task.todoListId]))));case w.CHANGE_TASK:return Object(I.a)(Object(I.a)({},t),{},Object(S.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskId?Object(I.a)(Object(I.a)({},t),e.model):t}))));case k.ADD_NEW_TODOLIST:return Object(I.a)(Object(I.a)({},t),{},Object(S.a)({},e.todoList.id,[]));case k.REMOVE_TODOLIST:var n=Object(I.a)({},t);return delete n[e.todoListId],n;default:return t}}}),at=Object(nt.c)(it,Object(nt.a)(ct.a));window.store=at,o.a.render(Object(j.jsx)(p.a,{store:at,children:Object(j.jsx)(et,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},79:function(t,e,n){},80:function(t,e,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.3b8f5a17.chunk.js.map