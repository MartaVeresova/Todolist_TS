(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{121:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),i=n(10),o=n.n(i);n(92),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(93);var r,s,u,d=n(168),l=n(166),O=n(173),j=n(163),b=n(169),f=n(171),T=n(172),h=n(170),S=n(17),p=n(51),m=n(8),g=n(72),v=n.n(g).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"api-key":"56cc9d09-6ac5-48a7-98d1-6f7ea21ef704"}}),k=function(){return v.get("/todo-lists")},x=function(t){return v.post("/todo-lists",{title:t})},C=function(t){return v.delete("/todo-lists/".concat(t))},y=function(t,e){return v.put("/todo-lists/".concat(t),{title:e})},L=function(t){return v.get("/todo-lists/".concat(t,"/tasks"))},E=function(t,e){return v.post("/todo-lists/".concat(t,"/tasks"),{title:e})},I=function(t,e){return v.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},D=function(t,e,n){return v.put("/todo-lists/".concat(t,"/tasks/").concat(e),n)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(r||(r={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={})),function(t){t[t.succeeded=0]="succeeded",t[t.error=1]="error",t[t.captcha=10]="captcha"}(u||(u={}));var A={status:"loading",error:null,entityStatus:"idle"},w=function(t){return{type:"APP/SET-STATUS",status:t}},N=function(t){return{type:"APP/SET-ERROR",error:t}},K=function(t,e){t(N(e)),t(w("failed"))},R=function(t,e){e.messages.length?t(N(e.messages[0])):t(N("Some ERROR")),t(w("failed"))},P=[],H=n(167),G=n(122),M=n(39),U=n(174),W=n(164),F=n(5),V=a.a.memo((function(t){var e=t.addItem,n=t.disabled,a=Object(c.useState)(""),i=Object(M.a)(a,2),o=i[0],r=i[1],s=Object(c.useState)(!1),u=Object(M.a)(s,2),d=u[0],l=u[1],O=Object(c.useCallback)((function(t){r(t.currentTarget.value),l(!1)}),[]),b=Object(c.useCallback)((function(){""!==o.trim()?e(o.trim()):l(!0),r("")}),[e,o]),f=Object(c.useCallback)((function(t){"Enter"===t.key&&b()}),[b]);return Object(F.jsxs)("div",{children:[Object(F.jsx)(U.a,{variant:"outlined",error:d,placeholder:"Enter a new task",value:o,onChange:O,onKeyPress:f,label:"Title",helperText:d&&"Title is required!",size:"small",onBlur:function(){return l(!1)},disabled:n}),Object(F.jsx)(j.a,{onClick:b,disabled:n,children:Object(F.jsx)(W.a,{})})]})})),z=n(159),B=a.a.memo((function(t){var e=t.title,n=t.onChangeTitle,a=Object(c.useState)(!1),i=Object(M.a)(a,2),o=i[0],r=i[1],s=Object(c.useState)(e),u=Object(M.a)(s,2),d=u[0],l=u[1],O=Object(c.useCallback)((function(){r(!1),d.length>100&&l(e),n(d)}),[n,d]),j=Object(c.useCallback)((function(t){l(t.currentTarget.value)}),[]),b=Object(c.useCallback)((function(t){"Enter"===t.key&&O()}),[O]);return o?Object(F.jsx)(z.a,{color:"primary",value:d,onChange:j,autoFocus:!0,onBlur:O,onKeyPress:b}):Object(F.jsx)("span",{onDoubleClick:function(){return r(!0)},children:e})})),J=n(77),Y=n.n(J),q=n(27),$={},Q=function(t,e,n){return function(c,a){var i=a().tasks[t].find((function(t){return t.id===n}));if(i){var o=Object(m.a)({title:i.title,status:i.status,startDate:i.startDate,priority:i.priority,deadline:i.deadline,description:i.description},e);c(w("loading")),D(t,n,o).then((function(a){a.data.resultCode===u.succeeded?(c(function(t,e,n){return{type:"TASKS/CHANGE-TASK",taskId:t,model:e,todoListId:n}}(n,e,t)),c(w("succeeded"))):R(c,a.data)})).catch((function(t){K(c,t.message)}))}}},X=n(176),Z=n(165),_=a.a.memo((function(t){var e=t.todoListId,n=t.task,a=t.entityStatus,i=Object(S.b)(),o=Object(c.useCallback)((function(){return i((t=e,c=n.id,function(e){e(w("loading")),I(t,c).then((function(n){n.data.resultCode===u.succeeded?(e(function(t,e){return{type:"TASKS/REMOVE-TASK",taskId:t,todoListId:e}}(c,t)),e(w("succeeded"))):R(e,n.data)})).catch((function(t){K(e,t.message)}))}));var t,c}),[i,n,e]),s=Object(c.useCallback)((function(t){i(Q(e,{status:t.currentTarget.checked?r.Completed:r.New},n.id))}),[i,n,e]),d=Object(c.useCallback)((function(t){return i(Q(e,{title:t},n.id))}),[i,n,e]),l=n.status===r.Completed?"isDone":"";return Object(F.jsxs)("li",{children:[Object(F.jsxs)("span",{className:l,children:[Object(F.jsx)(X.a,{color:"primary",checked:n.status===r.Completed,onChange:s}),Object(F.jsx)(B,{title:n.title,onChangeTitle:d})]}),Object(F.jsx)(j.a,{onClick:o,disabled:"loading"===a,children:Object(F.jsx)(Z.a,{})})]},n.id)})),tt=a.a.memo((function(t){var e=t.todoListId,n=t.changeTodoListTitle,a=t.removeTodolist,i=t.changeFilter,o=t.title,s=t.filter,d=t.entityStatus,O=Object(S.c)((function(t){return t.tasks[e]})),b=Object(S.b)();Object(c.useEffect)((function(){b(function(t){return function(e){e(w("loading")),L(t).then((function(n){e(function(t,e){return{type:"TASKS/SET-TASKS",todoListId:t,tasks:e}}(t,n.data.items)),e(w("succeeded"))}))}}(e))}),[]);var f=function(){switch(s){case"active":return O.filter((function(t){return t.status===r.New}));case"completed":return O.filter((function(t){return t.status===r.Completed}));default:return O}}(),T=Object(c.useCallback)((function(){i("all",e)}),[i,e]),h=Object(c.useCallback)((function(){i("active",e)}),[i,e]),p=Object(c.useCallback)((function(){i("completed",e)}),[i,e]),m=Object(c.useCallback)((function(){a(e)}),[a,e]),g=Object(c.useCallback)((function(t){return b(function(t,e){return function(n){n(w("loading")),E(t,e).then((function(t){t.data.resultCode===u.succeeded?(n({type:"TASKS/ADD-NEW-TASK",task:t.data.data.item}),n(w("succeeded"))):R(n,t.data)})).catch((function(t){K(n,t.message)}))}}(e,t))}),[b,e]),v=Object(c.useCallback)((function(t){return n(t,e)}),[n,e]);return Object(F.jsxs)("div",{children:[Object(F.jsxs)("h3",{children:[Object(F.jsx)(B,{title:o,onChangeTitle:v}),Object(F.jsx)(j.a,{onClick:m,disabled:"loading"===d,children:Object(F.jsx)(Y.a,{})})]}),Object(F.jsx)(V,{addItem:g,disabled:"loading"===d}),Object(F.jsx)("ul",{style:{listStyle:"none",paddingLeft:"0px"},children:f.map((function(t){return Object(F.jsx)(_,{todoListId:e,task:t,entityStatus:d},t.id)}))}),Object(F.jsxs)("div",{children:[Object(F.jsx)(l.a,{variant:"all"===s?"contained":"outlined",size:"small",color:"primary",onClick:T,children:"All"}),Object(F.jsx)(l.a,{style:{marginLeft:"3px"},variant:"active"===s?"contained":"outlined",size:"small",color:"primary",onClick:h,children:"Active"}),Object(F.jsx)(l.a,{style:{marginLeft:"3px"},variant:"completed"===s?"contained":"outlined",size:"small",color:"primary",onClick:p,children:"Completed"})]})]})})),et=function(){var t=Object(S.c)((function(t){return t.todoLists})),e=Object(S.b)();function n(t){var n;e((n=t,function(t){t(w("loading")),t(function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",entityStatus:"loading",id:e}}(0,n)),C(n).then((function(e){e.data.resultCode===u.succeeded?(t(function(t){return{type:"TODO/REMOVE-TODOLIST",id:t}}(n)),t(w("succeeded"))):R(t,e.data)})).catch((function(e){K(t,e.message)}))}))}Object(c.useEffect)((function(){e((function(t){t(w("loading")),k().then((function(e){t({type:"TODO/SET-TODOLISTS",todoLists:e.data}),t(w("succeeded"))}))}))}),[]);var a=Object(c.useCallback)((function(t){e(function(t){return function(e){e(w("loading")),x(t).then((function(t){t.data.resultCode===u.succeeded?(e({type:"TODO/ADD-NEW-TODOLIST",todoList:t.data.data.item}),e(w("succeeded"))):R(e,t.data)})).catch((function(t){K(e,t.message)}))}}(t))}),[e]);function i(t,n){e(function(t,e){return function(n){n(w("loading")),y(t,e).then((function(c){c.data.resultCode===u.succeeded?(n(function(t,e){return{type:"TODO/CHANGE-TODOLIST-TITLE",title:t,id:e}}(e,t)),n(w("succeeded"))):R(n,c.data)})).catch((function(t){K(n,t.message)}))}}(n,t))}function o(t,n){e(function(t,e){return{type:"TODO/CHANGE-TODOLIST-FILTER",value:t,id:e}}(t,n))}return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(H.a,{container:!0,style:{padding:"20px 0"},children:Object(F.jsx)(V,{addItem:a})}),Object(F.jsx)(H.a,{container:!0,spacing:3,children:t.map((function(t){return Object(F.jsx)(H.a,{item:!0,children:Object(F.jsx)(G.a,{elevation:4,style:{padding:"15px"},children:Object(F.jsx)(tt,{todoListId:t.id,title:t.title,filter:t.filter,entityStatus:t.entityStatus,changeFilter:o,removeTodolist:n,changeTodoListTitle:i})})},t.id)}))})]})},nt=n(178),ct=n(175);function at(t){return Object(F.jsx)(ct.a,Object(m.a)({elevation:6,variant:"filled"},t))}function it(){var t=Object(S.b)(),e=Object(S.c)((function(t){return t.app.error})),n=function(e,n){"clickaway"!==n&&t(N(null))};return Object(F.jsx)(nt.a,{open:null!==e,autoHideDuration:4e3,onClose:n,children:Object(F.jsx)(at,{onClose:n,severity:"error",children:e})})}var ot=function(){var t=Object(S.c)((function(t){return t.app.status}));return Object(F.jsxs)("div",{children:[Object(F.jsx)(d.a,{position:"static",children:Object(F.jsxs)(b.a,{style:{justifyContent:"space-between"},children:[Object(F.jsx)(j.a,{color:"inherit",children:Object(F.jsx)(h.a,{})}),Object(F.jsx)(f.a,{variant:"h6",children:"TodoLists"}),Object(F.jsx)(l.a,{color:"inherit",variant:"outlined",children:"LogIn"})]})}),"loading"===t&&Object(F.jsx)(T.a,{color:"secondary"}),Object(F.jsx)(O.a,{fixed:!0,children:Object(F.jsx)(et,{})}),Object(F.jsx)(it,{})]})},rt=n(52),st=n(78),ut=Object(rt.b)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TODO/SET-TODOLISTS":return e.todoLists.map((function(t){return Object(m.a)(Object(m.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"TODO/REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"TODO/ADD-NEW-TODOLIST":return[Object(m.a)(Object(m.a)({},e.todoList),{},{filter:"all",entityStatus:"idle"})].concat(Object(p.a)(t));case"TODO/CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.id?Object(m.a)(Object(m.a)({},t),{},{title:e.title}):t}));case"TODO/CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.id?Object(m.a)(Object(m.a)({},t),{},{filter:e.value}):t}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(m.a)(Object(m.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TASKS/SET-TASKS":return Object(m.a)(Object(m.a)({},t),{},Object(q.a)({},e.todoListId,e.tasks));case"TODO/SET-TODOLISTS":return e.todoLists.forEach((function(e){return Object(m.a)({},t[e.id]=[])})),Object(m.a)({},t);case"TASKS/REMOVE-TASK":return Object(m.a)(Object(m.a)({},t),{},Object(q.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.taskId}))));case"TASKS/ADD-NEW-TASK":return Object(m.a)(Object(m.a)({},t),{},Object(q.a)({},e.task.todoListId,[e.task].concat(Object(p.a)(t[e.task.todoListId]))));case"TASKS/CHANGE-TASK":return Object(m.a)(Object(m.a)({},t),{},Object(q.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskId?Object(m.a)(Object(m.a)({},t),e.model):t}))));case"TODO/ADD-NEW-TODOLIST":return Object(m.a)(Object(m.a)({},t),{},Object(q.a)({},e.todoList.id,[]));case"TODO/REMOVE-TODOLIST":var n=Object(m.a)({},t);return delete n[e.id],n;default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(m.a)(Object(m.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(m.a)(Object(m.a)({},t),{},{error:e.error});default:return t}}}),dt=Object(rt.c)(ut,Object(rt.a)(st.a));window.store=dt,o.a.render(Object(F.jsx)(S.a,{store:dt,children:Object(F.jsx)(ot,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},92:function(t,e,n){},93:function(t,e,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.329ae2e1.chunk.js.map