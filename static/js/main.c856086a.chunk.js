(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{104:function(t,e,n){"use strict";n.r(e);var c=n(0),i=n.n(c),a=n(10),o=n.n(a);n(79),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(80);var r,s,u,l=n(142),d=n(143),O=n(137),j=n(145),b=n(140),f=n(146),T=n(144),h=n(19),L=n(43),p=n(9),E=n(61),S=n.n(E).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"api-key":"56cc9d09-6ac5-48a7-98d1-6f7ea21ef704"}}),m=function(){return S.get("/todo-lists")},I=function(t){return S.post("/todo-lists",{title:t})},k=function(t){return S.delete("/todo-lists/".concat(t))},v=function(t,e){return S.put("/todo-lists/".concat(t),{title:e})},C=function(t){return S.get("/todo-lists/".concat(t,"/tasks"))},x=function(t,e){return S.post("/todo-lists/".concat(t,"/tasks"),{title:e})},D=function(t,e){return S.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},_=function(t,e,n){return S.put("/todo-lists/".concat(t,"/tasks/").concat(e),n)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(r||(r={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={})),function(t){t.SET_TODOLISTS="SET-TODOLISTS",t.REMOVE_TODOLIST="REMOVE-TODOLIST",t.ADD_NEW_TODOLIST="ADD-NEW-TODOLIST",t.CHANGE_TODOLIST_TITLE="CHANGE-TODOLIST-TITLE",t.CHANGE_TODOLIST_FILTER="CHANGE-TODOLIST-FILTER"}(u||(u={}));var A,g=[],y=function(){return function(t){m().then((function(e){var n;t((n=e.data,{type:u.SET_TODOLISTS,todoLists:n}))}))}},N=function(t){return function(e){k(t).then((function(){e(function(t){return{type:u.REMOVE_TODOLIST,id:t}}(t))}))}},w=function(t){return function(e){I(t).then((function(t){var n;e((n=t.data.data.item,{type:u.ADD_NEW_TODOLIST,todoList:n}))}))}},K=function(t,e){return function(n){v(t,e).then((function(){n(function(t,e){return{type:u.CHANGE_TODOLIST_TITLE,title:t,id:e}}(e,t))}))}},H=n(141),R=n(105),G=n(31),M=n(147),W=n(138),V=n(5),F=i.a.memo((function(t){var e=t.addItem,n=Object(c.useState)(""),i=Object(G.a)(n,2),a=i[0],o=i[1],r=Object(c.useState)(!1),s=Object(G.a)(r,2),u=s[0],l=s[1],d=Object(c.useCallback)((function(t){o(t.currentTarget.value),l(!1)}),[]),j=Object(c.useCallback)((function(){""!==a.trim()?e(a.trim()):l(!0),o("")}),[e,a]),b=Object(c.useCallback)((function(t){"Enter"===t.key&&j()}),[j]);return Object(V.jsxs)("div",{children:[Object(V.jsx)(M.a,{variant:"outlined",error:u,placeholder:"Enter a new task",value:a,onChange:d,onKeyPress:b,label:"Title",helperText:u&&"Title is required!",size:"small",onBlur:function(){return l(!1)}}),Object(V.jsx)(O.a,{onClick:j,children:Object(V.jsx)(W.a,{})})]})})),z=n(133),B=i.a.memo((function(t){var e=t.title,n=t.onChangeTitle,i=Object(c.useState)(!1),a=Object(G.a)(i,2),o=a[0],r=a[1],s=Object(c.useState)(e),u=Object(G.a)(s,2),l=u[0],d=u[1],O=Object(c.useCallback)((function(){r(!1),n(l)}),[n,l]),j=Object(c.useCallback)((function(t){d(t.currentTarget.value)}),[]),b=Object(c.useCallback)((function(t){"Enter"===t.key&&O()}),[O]);return o?Object(V.jsx)(z.a,{color:"primary",value:l,onChange:j,autoFocus:!0,onBlur:O,onKeyPress:b}):Object(V.jsx)("span",{onDoubleClick:function(){return r(!0)},children:e})})),P=n(139),U=n(24);!function(t){t.SET_TASKS="SET-TASKS",t.REMOVE_TASK="REMOVE-TASK",t.ADD_NEW_TASK="ADD-NEW-TASK",t.CHANGE_TASK="CHANGE-TASK"}(A||(A={}));var J={},q=function(t){return function(e){C(t).then((function(n){e(function(t,e){return{type:A.SET_TASKS,todoListId:t,tasks:e}}(t,n.data.items))}))}},$=function(t,e){return function(n){D(t,e).then((function(){n(function(t,e){return{type:A.REMOVE_TASK,taskId:t,todoListId:e}}(e,t))}))}},Q=function(t,e){return function(n){x(t,e).then((function(t){var e;n((e=t.data.data.item,{type:A.ADD_NEW_TASK,task:e}))}))}},X=function(t,e,n){return function(c,i){var a=i().tasks[t].find((function(t){return t.id===n}));if(a){var o=Object(p.a)({title:a.title,status:a.status,startDate:a.startDate,priority:a.priority,deadline:a.deadline,description:a.description},e);_(t,n,o).then((function(){c(function(t,e,n){return{type:A.CHANGE_TASK,taskId:t,model:e,todoListId:n}}(n,e,t))}))}}},Y=n(148),Z=i.a.memo((function(t){var e=t.todoListId,n=t.task,i=Object(h.b)(),a=Object(c.useCallback)((function(){return i($(e,n.id))}),[i,n,e]),o=Object(c.useCallback)((function(t){i(X(e,{status:t.currentTarget.checked?r.Completed:r.New},n.id))}),[i,n,e]),s=Object(c.useCallback)((function(t){return i(X(e,{title:t},n.id))}),[i,n,e]),u=n.status===r.Completed?"isDone":"";return Object(V.jsxs)("li",{children:[Object(V.jsxs)("span",{className:u,children:[Object(V.jsx)(Y.a,{color:"primary",checked:n.status===r.Completed,onChange:o}),Object(V.jsx)(B,{title:n.title,onChangeTitle:s})]}),Object(V.jsx)(O.a,{onClick:a,children:Object(V.jsx)(P.a,{})})]},n.id)})),tt=i.a.memo((function(t){var e=t.todoListId,n=t.changeTodoListTitle,i=t.removeTodolist,a=t.changeFilter,o=t.title,s=t.filter,u=Object(h.c)((function(t){return t.tasks[e]})),l=Object(h.b)();Object(c.useEffect)((function(){l(q(e))}),[]);var d=function(){switch(s){case"active":return u.filter((function(t){return t.status===r.New}));case"completed":return u.filter((function(t){return t.status===r.Completed}));default:return u}}(),j=Object(c.useCallback)((function(){a("all",e)}),[a,e]),f=Object(c.useCallback)((function(){a("active",e)}),[a,e]),T=Object(c.useCallback)((function(){a("completed",e)}),[a,e]),L=Object(c.useCallback)((function(){i(e)}),[i,e]),p=Object(c.useCallback)((function(t){return l(Q(e,t))}),[l,e]),E=Object(c.useCallback)((function(t){return n(t,e)}),[n,e]);return Object(V.jsxs)("div",{children:[Object(V.jsxs)("h3",{children:[Object(V.jsx)(B,{title:o,onChangeTitle:E}),Object(V.jsx)(O.a,{onClick:L,children:Object(V.jsx)(P.a,{})})]}),Object(V.jsx)(F,{addItem:p}),Object(V.jsx)("ul",{style:{listStyle:"none",paddingLeft:"0px"},children:d.map((function(t){return Object(V.jsx)(Z,{todoListId:e,task:t},t.id)}))}),Object(V.jsxs)("div",{children:[Object(V.jsx)(b.a,{variant:"all"===s?"contained":"outlined",size:"small",color:"primary",onClick:j,children:"All"}),Object(V.jsx)(b.a,{style:{marginLeft:"3px"},variant:"active"===s?"contained":"outlined",size:"small",color:"primary",onClick:f,children:"Active"}),Object(V.jsx)(b.a,{style:{marginLeft:"3px"},variant:"completed"===s?"contained":"outlined",size:"small",color:"primary",onClick:T,children:"Completed"})]})]})})),et=function(){var t=Object(h.c)((function(t){return t.todoLists})),e=Object(h.b)();function n(t){e(N(t))}Object(c.useEffect)((function(){e(y())}),[]);var i=Object(c.useCallback)((function(t){e(w(t))}),[e]);function a(t,n){e(K(n,t))}function o(t,n){e(function(t,e){return{type:u.CHANGE_TODOLIST_FILTER,value:t,id:e}}(t,n))}return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(H.a,{container:!0,style:{padding:"20px 0"},children:Object(V.jsx)(F,{addItem:i})}),Object(V.jsx)(H.a,{container:!0,spacing:3,children:t.map((function(t){return Object(V.jsx)(H.a,{item:!0,children:Object(V.jsx)(R.a,{elevation:4,style:{padding:"15px"},children:Object(V.jsx)(tt,{todoListId:t.id,title:t.title,changeFilter:o,filter:t.filter,removeTodolist:n,changeTodoListTitle:a})})},t.id)}))})]})};var nt=function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)(l.a,{position:"static",children:Object(V.jsxs)(d.a,{style:{justifyContent:"space-between"},children:[Object(V.jsx)(O.a,{color:"inherit",children:Object(V.jsx)(T.a,{})}),Object(V.jsx)(j.a,{variant:"h6",children:"TodoLists"}),Object(V.jsx)(b.a,{color:"inherit",variant:"outlined",children:"LogIn"})]})}),Object(V.jsx)(f.a,{fixed:!0,children:Object(V.jsx)(et,{})})]})},ct=n(44),it=n(66),at=Object(ct.b)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u.SET_TODOLISTS:return e.todoLists.map((function(t){return Object(p.a)(Object(p.a)({},t),{},{filter:"all"})}));case u.REMOVE_TODOLIST:return t.filter((function(t){return t.id!==e.id}));case u.ADD_NEW_TODOLIST:return[Object(p.a)(Object(p.a)({},e.todoList),{},{filter:"all"})].concat(Object(L.a)(t));case u.CHANGE_TODOLIST_TITLE:return t.map((function(t){return t.id===e.id?Object(p.a)(Object(p.a)({},t),{},{title:e.title}):t}));case u.CHANGE_TODOLIST_FILTER:return t.map((function(t){return t.id===e.id?Object(p.a)(Object(p.a)({},t),{},{filter:e.value}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case A.SET_TASKS:return Object(p.a)(Object(p.a)({},t),{},Object(U.a)({},e.todoListId,e.tasks));case u.SET_TODOLISTS:return e.todoLists.forEach((function(e){return Object(p.a)({},t[e.id]=[])})),Object(p.a)({},t);case A.REMOVE_TASK:return Object(p.a)(Object(p.a)({},t),{},Object(U.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.taskId}))));case A.ADD_NEW_TASK:return Object(p.a)(Object(p.a)({},t),{},Object(U.a)({},e.task.todoListId,[e.task].concat(Object(L.a)(t[e.task.todoListId]))));case A.CHANGE_TASK:return Object(p.a)(Object(p.a)({},t),{},Object(U.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskId?Object(p.a)(Object(p.a)({},t),e.model):t}))));case u.ADD_NEW_TODOLIST:return Object(p.a)(Object(p.a)({},t),{},Object(U.a)({},e.todoList.id,[]));case u.REMOVE_TODOLIST:var n=Object(p.a)({},t);return delete n[e.id],n;default:return t}}}),ot=Object(ct.c)(at,Object(ct.a)(it.a));window.store=ot,o.a.render(Object(V.jsx)(h.a,{store:ot,children:Object(V.jsx)(nt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},79:function(t,e,n){},80:function(t,e,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.c856086a.chunk.js.map